<%inherit file="/base/base.html"/>

<%def name="title()">
    ${c.repo_name} ${_('File annotate')} - ${c.rhodecode_name}
</%def>

<%def name="breadcrumbs_links()">
    ${h.link_to(u'Home',h.url('/'))}
    &raquo;
    ${h.link_to(c.repo_name,h.url('summary_home',repo_name=c.repo_name))}
    &raquo;
    ${_('annotate')} @ R${c.rev_nr}:${c.cur_rev}
</%def>

<%def name="page_nav()">
		${self.menu('files')}     
</%def>
<%def name="main()">
<div class="box">
    <!-- box / title -->
    <div class="title">
        ${self.breadcrumbs()}
    </div>
    <div class="table">
		<div id="files_data">
			<h3 class="files_location">${_('Location')}: ${h.files_breadcrumbs(c.repo_name,c.cur_rev,c.file.path)}</h3>
			<dl class="overview">
				<dt>${_('Last revision')}</dt>
				<dd>${h.link_to("r%s:%s" % (c.file.last_changeset.revision,c.file.last_changeset.raw_id),
						h.url('files_annotate_home',repo_name=c.repo_name,revision=c.file.last_changeset.raw_id,f_path=c.f_path))} </dd>
				<dt>${_('Size')}</dt>
				<dd>${h.format_byte_size(c.file.size,binary=True)}</dd>
    			<dt>${_('Mimetype')}</dt>
				<dd>${c.file.mimetype}</dd>				
				<dt>${_('Options')}</dt>
				<dd>${h.link_to(_('show source'),
						h.url('files_home',repo_name=c.repo_name,revision=c.cur_rev,f_path=c.f_path))}  
					/ ${h.link_to(_('show as raw'),
						h.url('files_raw_home',repo_name=c.repo_name,revision=c.cur_rev,f_path=c.f_path))}
					/ ${h.link_to(_('download as raw'),
						h.url('files_rawfile_home',repo_name=c.repo_name,revision=c.cur_rev,f_path=c.f_path))}
				</dd>				
			</dl>
			<div id="body" class="codeblock">
				<div class="code-header">
					<div class="revision">${c.file.name}@r${c.file.last_changeset.revision}:${c.file.last_changeset.raw_id}</div>
					<div class="commit">"${c.file_msg}"</div>
				</div>
				<div class="code-body">
					% if c.file.size < c.file_size_limit:
						${h.pygmentize_annotation(c.file,linenos=True,anchorlinenos=True,lineanchors='S',cssclass="code-highlight")}
					%else:
						${_('File is to big to display')} ${h.link_to(_('show as raw'),
						h.url('files_raw_home',repo_name=c.repo_name,revision=c.cur_rev,f_path=c.f_path))}
					%endif				
				</div>
			</div>
		</div>    
    </div>
</div>    
</%def>   