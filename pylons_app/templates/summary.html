<%inherit file="base/base.html"/>

<%def name="title()">
    ${_('Repository managment')}
</%def>
<%def name="breadcrumbs()">
    ${h.link_to(u'Home',h.url('/'))}
    / 
    ${h.link_to(c.repo_name,h.url('summary_home',repo_name=c.repo_name))}
    /
    ${_('summary')}
</%def>
<%def name="page_nav()">
        <form action="{url}log">
            {sessionvars%hiddenformentry}
            <dl class="search">
                <dt><label>Search: </label></dt>
                <dd><input type="text" name="rev" /></dd>
            </dl>
        </form>

        <ul class="page-nav">
            <li class="current">summary</li>
            <li><a href="{url}shortlog{sessionvars%urlparameter}">shortlog</a></li>
            <li><a href="{url}log{sessionvars%urlparameter}">changelog</a></li>
            <li><a href="{url}graph/{node|short}{sessionvars%urlparameter}">graph</a></li>
            <li><a href="{url}tags{sessionvars%urlparameter}">tags</a></li>
            <li><a href="{url}branches{sessionvars%urlparameter}">branches</a></li>
            <li><a href="{url}file/{node|short}{sessionvars%urlparameter}">files</a></li>
        </ul>
</%def>
<%def name="main()">

    <h2 class="no-link no-border">${_('Mercurial Repository Overview')}</h2>
    <dl class="overview">
        <dt>name</dt>
        <dd>${c.repo_info.name}</dd>
        <dt>description</dt>
        <dd>${c.repo_info.description}</dd>
        <dt>contact</dt>
        <dd>${c.repo_info.contact}</dd>
        <dt>last change</dt>
        <dd>${c.repo_info.last_change|n,self.f.time_ago}</dd>
    </dl>

    <h2><a href="{url}shortlog{sessionvars%urlparameter}">Changes</a></h2>
    <table>
	%for cnt,cs in enumerate(c.repo_changesets):
		<tr class="parity${cnt%2}">
			<td>${cs._ctx.date()|n,self.f.time_ago}</td>
			<td>${cs.author}</td>
			<td>${h.link_to(cs.message,h.url('rev/'+str(cs._ctx)))}</td>
			<td class="nowrap">
			${h.link_to(_('changeset'),h.url('file/'+str(cs._ctx)))}
			|
			${h.link_to(_('files'),h.url('file/'+str(cs._ctx)))}
			</td>
		</tr>
	%endfor
        <tr class="light">
            <td colspan="4"><a class="list" href="{url}shortlog{sessionvars%urlparameter}">...</a></td>
        </tr>
    </table>

    <h2><a href="{url}tags{sessionvars%urlparameter}">${_('Tags')}</a></h2>
    <table>
		%for tag in c.repo_tags:
			${tag}
		%endfor
        <tr class="light">
            <td colspan="3"><a class="list" href="{url}tags{sessionvars%urlparameter}">...</a></td>
        </tr>
    </table>

    <h2 class="no-link">Branches</h2>
    <table>
		%for branch in c.repo_branches:
			${branch}
		%endfor
        <tr class="light">
          <td colspan="4"><a class="list"  href="#">...</a></td>
        </tr>
    </table>

</%def>    