<%inherit file="/base/base.html"/>

<%def name="title()">
    ${_('Repository managment')}
</%def>
<%def name="breadcrumbs()">
    ${h.link_to(u'Home',h.url('/'))}
    / 
    ${h.link_to(c.repo_name,h.url('files_home',repo_name=c.repo_name))}
    /
    ${_('files')}
</%def>
<%def name="page_nav()">
        <form action="log">
            <dl class="search">
                <dt><label>Search: </label></dt>
                <dd><input type="text" name="rev" /></dd>
            </dl>
        </form>

		${self.menu('files')}     
</%def>
<%def name="css()">
<link rel="stylesheet" href="/css/monoblue_custom.css" type="text/css" />
<link rel="stylesheet" href="/css/pygments_diff.css" type="text/css" />
</%def>
<div></div>
<%def name="main()">
    <h2 class="no-link no-border">${'%s: %s@%s %s %s' % (_('File diff'),c.f_path,c.diff2,'&rarr;',c.diff1)|n}</h2>
	<div id="files_data">
		<div id="body" class="codeblock">
			${h.pygmentize(c.diff,linenos=True,anchorlinenos=True,cssclass="code-diff")}
		</div>
	</div>
	<div style="clear:both"></div>
    <div id="files_data">
        <div id="body" class="codeblock">
            <table class='highlighttable'>
            %for x in c.diff_2[0]['chunks']:
                %for y in x:
                    <tr class="line ${y['action']}">
                        <td class="lineno_new">
                            <div class="linenodiv">
                                <pre>
                                    ${y['new_lineno']}
                                </pre>
                            </div>
                        </td>
                        <td class="lineno_old">
                            <div class="linenodiv">
                                <pre>
                                    ${y['old_lineno']}
                                </pre>
                            </div>
                        </td>                        
                        <td class="code">
	                        <div class="code-diff">
	                           <pre>
	                               <span>
	                               ${y}
	                               </span>
	                           </pre>
	                        </div>
                        </td>
                    </tr>
                %endfor$
            %endfor
            </table>
        </div>
    </div>	
</%def>    