${h.form(url('update_user', id=c.user.user_id),method='put')}
<div class="form">
        <div class="field">
           <div class="gravatar_box">
                <div class="gravatar">${h.gravatar(c.user.email)}</div>
                <p>
                %if c.visual.use_gravatar:
                <strong>${_('Change avatar at')} <a href="http://gravatar.com">gravatar.com</a></strong>
                <br/>${_('Using')} ${c.user.email}
                %else:
                <strong>${_('Avatars are disabled')}</strong>
                <br/>${c.user.email or _('Missing email, please update this user email address.')}
                        ##show current ip just if we show ourself
                        %if c.authuser.username == c.user.username:
                            [${_('Current IP')}: ${c.ip_addr}]
                        %endif
                %endif
           </div>
        </div>
        <div class="fields">

             <div class="field">
                <div class="label">
                    <label for="username">${_('Username')}:</label>
                </div>
                <div class="input">
                  ${h.text('username',class_='medium', readonly=c.readonly('username'))}
                </div>
             </div>

             <div class="field">
                <div class="label">
                    <label for="email">${_('Email')}:</label>
                </div>
                <div class="input">
                    ${h.text('email',class_='medium', readonly=c.readonly('email'))}
                </div>
             </div>

             <div class="field">
                <div class="label">
                    <label for="extern_type">${_('Source of Record')}:</label>
                </div>
                <div class="input">
                    ${h.text('extern_type',class_='medium',readonly="readonly")}
                </div>
             </div>

             <div class="field">
                <div class="label">
                    <label for="extern_name">${_('Name in Source of Record')}:</label>
                </div>
                <div class="input">
                    ${h.text('extern_name',class_='medium',readonly="readonly")}
                </div>
             </div>

             <div class="field">
                <div class="label">
                    <label for="new_password">${_('New password')}:</label>
                </div>
                <div class="input">
                    ${h.password('new_password',class_='medium',readonly=c.readonly('password'))}
                </div>
             </div>

             <div class="field">
                <div class="label">
                    <label for="password_confirmation">${_('New password confirmation')}:</label>
                </div>
                <div class="input">
                    ${h.password('password_confirmation',class_="medium",readonly=c.readonly('password'))}
                </div>
             </div>

             <div class="field">
                <div class="label">
                    <label for="firstname">${_('First Name')}:</label>
                </div>
                <div class="input">
                    ${h.text('firstname',class_='medium', readonly=c.readonly('firstname'))}
                </div>
             </div>

             <div class="field">
                <div class="label">
                    <label for="lastname">${_('Last Name')}:</label>
                </div>
                <div class="input">
                    ${h.text('lastname',class_='medium', readonly=c.readonly('lastname'))}
                </div>
             </div>

             <div class="field">
                <div class="label label-checkbox">
                    <label for="active">${_('Active')}:</label>
                </div>
                <div class="checkboxes">
                    ${h.checkbox('active',value=True, readonly=c.readonly('active'))}
                </div>
             </div>

             <div class="field">
                <div class="label label-checkbox">
                    <label for="admin">${_('Admin')}:</label>
                </div>
                <div class="checkboxes">
                    ${h.checkbox('admin',value=True, readonly=c.readonly('admin'))}
                </div>
             </div>

            <div class="buttons">
              ${h.submit('save',_('Save'),class_="btn")}
              ${h.reset('reset',_('Reset'),class_="btn")}
            </div>
        </div>
</div>
${h.end_form()}
