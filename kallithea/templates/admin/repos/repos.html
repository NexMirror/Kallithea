## -*- coding: utf-8 -*-
<%inherit file="/base/base.html"/>

<%block name="title">
    ${_('Repositories Administration')}
</%block>

<%def name="breadcrumbs_links()">
    <span id="repo_count">0</span> ${_('Repositories')}
</%def>
<%block name="header_menu">
    ${self.menu('admin')}
</%block>
<%def name="main()">
<div class="box">

    <div class="title">
        ${self.breadcrumbs()}
        <ul class="links">
         %if h.HasPermissionAny('hg.admin','hg.create.repository')():
          <li>
            <a href="${h.url('new_repo')}" class="btn btn-small btn-success"><i class="icon-plus"></i> ${_('Add Repository')}</a>
          </li>
         %endif
        </ul>
    </div>
    <div class="table">
        <table id="datatable_list_wrap"></table>
    </div>
    <div id="user-paginator" style="padding: 0px 0px 0px 20px"></div>


</div>
<script>
  var data = ${c.data|n};
  var myDataTable = $("#datatable_list_wrap").DataTable({
        data: data.records,
        columns: [
            {data: "menu", sortable: false, className: "quick_repo_menu hidden", searchable: false},
            {data: "raw_name", visible: false, searchable: false},
            {data: "name", orderData: 1, title: "${_('Name')}"},
            {data: "desc", title: "${_('Description')}", searchable: false},
            {data: "last_rev_raw", visible: false, searchable: false},
            {data: "last_changeset", orderData: 4, title: "${_('Tip')}", searchable: false},
            {data: "owner", title: "${_('Owner')}", searchable: false},
            {data: "state", title: "${_('State')}", searchable: false},
            {data: "action", title: "${_('Action')}", sortable: false, searchable: false}
        ],
        drawCallback: updateRowCountCallback($("#repo_count")),
        pageLength: 100
    });
</script>

</%def>
