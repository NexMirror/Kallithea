## -*- coding: utf-8 -*-
<%inherit file="/base/base.html"/>

<%block name="title">
    ${_('Show Notification')} ${request.authuser.username}
</%block>

<%def name="breadcrumbs_links()">
    ${h.link_to(_('Notifications'),h.url('notifications'))}
    &raquo;
    ${_('Show Notification')}
</%def>

<%block name="header_menu">
    ${self.menu('admin')}
</%block>

<%def name="main()">
<div class="panel panel-primary">
    <div class="panel-heading clearfix">
        ${self.breadcrumbs()}
    </div>
    <div class="panel-body">
      <div id="notification_${c.notification.notification_id}">
        <div class="clearfix">
          ${h.gravatar_div(c.notification.created_by_user.email, size=24)}
          <span class="pull-left">
              ${c.notification.description}
          </span>
          <button type="button" id="${c.notification.notification_id}" class="delete-notification btn btn-default pull-right"><i class="icon-trashcan"></i>${_('Delete')}</button>
        </div>
        <div>
            %if c.notification.subject:
                <div class="h4">${h.literal(c.notification.subject)}</div>
            %endif
            <div class="well">
            %if c.notification.body:
                ${h.render_w_mentions(c.notification.body)}
            %endif
            </div>
        </div>
      </div>
    </div>
</div>
<script type="text/javascript">
var url = ${h.js(url('notification_delete', notification_id='__NOTIFICATION_ID__'))};
var main = ${h.js(url('notifications'))};
   $('.delete-notification').click(function(e){
       var notification_id = e.currentTarget.id;
       deleteNotification(url,notification_id,[function(){window.location=main}]);
   });
</script>
</%def>
