<div id="update_notice" style="display: none">
    <div>${_('Checking for updates...')}</div>
</div>

<%
 elems = [
    (_('Kallithea version'), h.literal('%s <b><span id="check_for_update" style="display:none">%s</span></b>' % (c.kallithea_version, _('Check for updates'))), ''),
    (_('Kallithea configuration file'), c.ini['__file__'], ''),
    (_('Python version'), c.py_version, ''),
    (_('Platform'), c.platform, ''),
    (_('Git version'), c.git_version, ''),
    (_('Git path'), c.ini.get('git_path'), ''),
    (_('Upgrade info endpoint'), h.literal('%s <br/><span class="text-muted">%s.</span>' % (c.update_url, _('Note: please make sure this server can access this URL'))), ''),
 ]
%>
<dl class="dl-horizontal">
%for dt, dd, tt in elems:
  <dt>${dt}:</dt>
  <dd title="${tt}">${dd}</dd>
%endfor
</dl>

<h4>${_('Python Packages')}</h4>
<table class="table">
  <colgroup>
      <col>
      <col>
  </colgroup>
  <tbody>
      %for key, value in c.modules:
          <tr>
              <td>${key}</td>
              <td>${value}</td>
          </tr>
      %endfor
  </tbody>
</table>

<script>
    $('#check_for_update').click(function(e){
        var $update_notice = $('#update_notice');
        $update_notice.show();
        asynchtml(${h.js(h.url('admin_settings_system_update'))}, $update_notice);
    });
</script>
